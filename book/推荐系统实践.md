# 推荐系统实践

### 为什么需要推荐系统？

- 信息过载
- 不明确的需求

### 推荐方法

- 专家推荐
- 社会化推荐，社交信息
- 推荐算法
  - 榜单推荐 协同过滤
  - 导演标签推荐 基于内容
  - 物品相似推荐 基于物品



### 推荐系统中的长尾问题

- long tail，即指数函数，通俗的解释就是二八法则
- 基尼系数，page44

### 用户兴趣分析 

- 用户画像，BI？

### 推荐系统包含的主要部分

- 前台展示
  - 推荐item的描述和评分
  - 推荐结果 标题 缩略图 各种属性
  - 推荐理由

- 后台日志

- 推荐算法

### 推荐系统的特点分析

- 关于音乐推荐系统的特点分析，p29

### 算法验证与衡量指标

page50

- ab测试？

- 准确率，衡量预测得准不准，tp/（tp+fp）

- 召回率，衡量预测得全不全，tp/（tp+fn），推荐的有多少是要被召回的，page43

- 预测结果进行划分，tp和fp，预测为真和预测为真实际为假

- 对实际结果进行划分，fn和tn，除预测为真的实际为真的和除预测为真实际为假的实际为假

- 覆盖率，推荐系统的覆盖率，用于衡量长尾问题是否解决，推荐物品是否覆盖了所有物品，因为推荐热门物品肯定是好的，但冷门物品就会有问题

- 通过基尼系数衡量马太效应，消除马太效应

- 新颖性，page46通过牺牲精度提高新颖性
- 流行度，物品热度，page61，示例，推荐物品的平均热度

- 惊喜度，推荐的物品是和用户喜欢的历史不相似的，但用户却喜欢

- 时效性，天气预报的推荐
- 冷启动，推荐系统对新用户的初始化，当用户有行为时推荐列表的变化

- 健壮性，通过攻击代价，设计规则清理数据

### 分析用户行为数据

- 用户行为不是随机的，而是蕴含着很多模式。例如：啤酒与尿布
- 用户行为统一表示，page55
- 用户越活跃，越倾向于浏览冷门商品，page55之后

## 推荐系统验证

首先，需要明确实验目标

### 不同算法

- 协同过滤算法
- 基于邻域的方法
- 隐语意的方法
- 基于图的随机游走方法

### 基于用户的协同过滤算法（UserCF）

师兄给师弟推荐书籍论文

- 算法步骤
  1. 找到和目标用户相似的用户
  2. 找到用户的喜欢的集合，在此集合中找到目标用户没听过的物品推荐给目标用户
- 相似度计算方法，page62
  - Jaccard相似度
  - 余弦相似度
    - 实现过程中的对分子向量相乘可以简化成取并集
    - 时间复杂度的优化，先获得物品-用户的倒排表，通过倒排表计算两两间的相似度，优化掉相似度为零的用户计算步骤
  - 计算用户对某件商品的感兴趣程度，page64
    1. 获取与目标用户最接近的K个用户
    2. 获取对某件商品有过行为的用户
    3. 选出1和2中的并集用户，累加这些用户与目标用户的相似度，作为用户对某件商品的感兴趣程度
- 验证算法的正确性，以及对算法进行调参（这里主要对K进行调参）
  - 设置不同的K值在数据集上进行跑测，选出 准确率、召回率、覆盖率和流行度最好的K值
- 想法与改进
  - 如果两个用户多喜欢一个比较冷门的商品，则两个用户的相似度相对较高，page66

### 基于物品的协同过滤算法（ItemCF）

UserCF用户较多的时候，计算太慢了，亚马逊作为一个卖东西的网站提出了ItemCF，推荐用户喜欢过的物品的相似物品给用户

- 计算物品的相似度靠的是用户而不是靠计算物品的属性相似，主要通过分析大多用户如果买了物品A也会买物品B，从而得出物品A和物品B相似的方法计算物品间的相似度
- 计算i和j两个物品的相似度，分子：买了物品i和物品j的所有用户，分母：买了物品i的所有用户
  - 改进版，因为如果物品j是热门商品，那么计算结果比较大，所以分母乘上一个买了物品j的所有用户
- 计算用户对某件商品的感兴趣程度，和UserCF中的方法类似，只不过换成了计算一个用户所买过的所有商品集合进行计算，page72
- 想法与改进
  - 如果存在一个用户他为了开店啥东西都买，会导致计算两个物品相似度的时候计算这个人的贡献度较大，为了避免这种情况，采用像UserCF一样的惩罚因子，page74
  - 相似度归一化，加入惩罚因子，规避掉同类型内相似度高的商品推荐较多，提高覆盖率，page76

## 研究成熟的推荐系统是怎么做的

### 怎么研究成熟的推荐系统？

- lastfm

- netfilx

- youtube
- 读写网rww
- digg
- hulu
- amazon
- 豆瓣
- 网易云音乐

### 数据集

- delicious
- cityulike
- movielens
- 

## 相关阅读

- 雅虎投放广告的论文
- adsense Google 上下文感知投放广告
- fb对好友分享（评论）进行排序
- 广告cpc cpm
- digg的推荐算法，page67
- Evaluation of item-based Top-N Recommendation Algorithm

## 想法

- 听其言，观其行
- 感觉王坚，埃隆马斯克才是真的知道自己想做什么的人，像我这样的其实很容受外界影响，钱多去哪，热门去哪。。。
- 以后要么发展成一家吃遍所有，要么发展成通过协议共享用户数据，不然用户行为分析很成问题
- 从读书中找到乐趣，先让读书这个行为变得成本很低，尽量不做打断心流的事情
- 设计一个惩罚因子，page66

## 术语

- cross selling，打包销售 
- 正反馈
  - 系统接收输入信号，产生的输出信号会影响输入信号，使输入信号加强，使系统输出更多的输出信号
  - 如果输出信号是对输入信号作用减弱的，则称为负反馈
- 